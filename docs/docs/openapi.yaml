openapi: 3.0.3
info:
  title: TempMail API
  description: |
    TempMail ä¸´æ—¶é‚®ç®±ç³»ç»Ÿ API v0.8.2-beta
    
    å®Œæ•´çš„ä¸´æ—¶é‚®ç®±æœåŠ¡åç«¯APIï¼Œæ”¯æŒç”¨æˆ·æ³¨å†Œã€é‚®ç®±åˆ›å»ºã€é‚®ä»¶æ¥æ”¶ã€åˆ«åç®¡ç†ç­‰åŠŸèƒ½ã€‚
    
    ## ğŸ“‹ å¿«é€Ÿå¼€å§‹
    - **åŸºç¡€URL**: `https://api.tempmail.example.com` (ç”Ÿäº§ç¯å¢ƒ) æˆ– `http://localhost:8080` (å¼€å‘ç¯å¢ƒ)
    - **è®¤è¯æ–¹å¼**: JWT Bearer Token æˆ– API Key
    - **å“åº”æ ¼å¼**: JSONï¼ˆç»Ÿä¸€å“åº”æ ¼å¼ï¼‰
    
    ## ğŸ¯ ä¸»è¦åŠŸèƒ½
    - ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆæ³¨å†Œ/ç™»å½•/JWTï¼‰
    - ğŸ“§ ä¸´æ—¶é‚®ç®±åˆ›å»ºå’Œç®¡ç†
    - ğŸ“¨ é‚®ä»¶æ¥æ”¶å’ŒæŸ¥çœ‹
    - ğŸ”„ é‚®ç®±åˆ«åç®¡ç†
    - ğŸ·ï¸ é‚®ä»¶æ ‡ç­¾åˆ†ç±»
    - ğŸ‘‘ ç®¡ç†å‘˜åŠŸèƒ½
    - ğŸ”Œ WebSocket å®æ—¶é€šçŸ¥
    - ğŸ”‘ API Key ç®¡ç†
    
    ## ğŸ’¡ é‡è¦è¯´æ˜
    - æœ¬ç³»ç»Ÿä»…ç”¨äºæ¥æ”¶é‚®ä»¶ï¼Œ**ä¸¥ç¦å¯¹å¤–å‘é€é‚®ä»¶**
    - æ‰€æœ‰APIå“åº”ä½¿ç”¨ç»Ÿä¸€æ ¼å¼ `{code, msg, data}`
    - æ”¯æŒå…¼å®¹APIï¼ˆmail.ry.edu.kg æ ¼å¼ï¼‰
  
  version: 0.8.2-beta
  contact:
    name: TempMail Team
    url: https://github.com/tempmail
  license:
    name: MIT

servers:
  - url: http://localhost:8080
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.tempmail.example.com
    description: ç”Ÿäº§ç¯å¢ƒ

paths:
  # å…¬å¼€APIï¼ˆæ— éœ€è®¤è¯ï¼‰
  /health:
    get:
      summary: å¥åº·æ£€æŸ¥
      description: æ£€æŸ¥APIæœåŠ¡çŠ¶æ€
      tags:
        - Health
      responses:
        '200':
          description: æœåŠ¡æ­£å¸¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                  type: string
                  example: ok

  /v1/public/domains:
    get:
      summary: è·å–å¯ç”¨åŸŸå
      description: è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰åŸŸååˆ—è¡¨
      tags:
        - Public
      responses:
        '200':
          description: åŸŸååˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
              example:
                code: 200
                msg: è·å–æˆåŠŸ
                data:
                  domains:
                    - temp.mail
                    - tempmail.dev

  # è®¤è¯API
  /v1/auth/register:
    post:
      summary: ç”¨æˆ·æ³¨å†Œ
      description: åˆ›å»ºæ–°çš„ç”¨æˆ·è´¦å·
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/Conflict'

  /v1/auth/login:
    post:
      summary: ç”¨æˆ·ç™»å½•
      description: ç”¨æˆ·ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /v1/auth/refresh:
    post:
      summary: åˆ·æ–°ä»¤ç‰Œ
      description: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshRequest'
      responses:
        '200':
          description: åˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /v1/auth/me:
    get:
      summary: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
      description: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
      tags:
        - Authentication
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç”¨æˆ·ä¿¡æ¯è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'

  # é‚®ç®±ç®¡ç†API
  /v1/mailboxes:
    post:
      summary: åˆ›å»ºä¸´æ—¶é‚®ç®±
      description: åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸´æ—¶é‚®ç®±åœ°å€
      tags:
        - Mailbox
      parameters:
        - name: optional_auth
          in: header
          description: å¯é€‰çš„JWTè®¤è¯ä»¤ç‰Œ
          schema:
            type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMailboxRequest'
      responses:
        '200':
          description: é‚®ç®±åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MailboxResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

    get:
      summary: è·å–é‚®ç®±åˆ—è¡¨
      description: è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰é‚®ç®±åˆ—è¡¨
      tags:
        - Mailbox
      security:
        - BearerAuth: []
      responses:
        '200':
          description: é‚®ç®±åˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  msg:
                    type: string
                    example: è·å–æˆåŠŸ
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/Mailbox'
                      count:
                        type: integer
                        example: 5

  /v1/mailboxes/{id}:
    get:
      summary: è·å–é‚®ç®±è¯¦æƒ…
      description: è·å–æŒ‡å®šé‚®ç®±çš„è¯¦ç»†ä¿¡æ¯
      tags:
        - Mailbox
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      responses:
        '200':
          description: é‚®ç®±ä¿¡æ¯è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Mailbox'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

    delete:
      summary: åˆ é™¤é‚®ç®±
      description: åˆ é™¤æŒ‡å®šé‚®ç®±åŠå…¶æ‰€æœ‰é‚®ä»¶
      tags:
        - Mailbox
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      responses:
        '204':
          description: é‚®ç®±åˆ é™¤æˆåŠŸ
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # é‚®ä»¶ç®¡ç†API
  /v1/mailboxes/{id}/messages:
    get:
      summary: è·å–é‚®ä»¶åˆ—è¡¨
      description: è·å–æŒ‡å®šé‚®ç®±çš„æ‰€æœ‰é‚®ä»¶
      tags:
        - Messages
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
        - name: limit
          in: query
          description: é™åˆ¶è¿”å›æ•°é‡
          schema:
            type: integer
            default: 50
        - name: offset
          in: query
          description: åç§»é‡
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: é‚®ä»¶åˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  msg:
                    type: string
                    example: è·å–æˆåŠŸ
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/Message'
                      count:
                        type: integer
                        example: 10

  /v1/mailboxes/{id}/messages/{messageId}:
    get:
      summary: è·å–é‚®ä»¶è¯¦æƒ…
      description: è·å–æŒ‡å®šé‚®ä»¶çš„å®Œæ•´å†…å®¹
      tags:
        - Messages
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          description: é‚®ä»¶ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      responses:
        '200':
          description: é‚®ä»¶è¯¦æƒ…è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageDetail'
        '404':
          $ref: '#/components/responses/NotFound'

  /v1/mailboxes/{id}/messages/{messageId}/read:
    post:
      summary: æ ‡è®°é‚®ä»¶ä¸ºå·²è¯»
      description: å°†æŒ‡å®šé‚®ä»¶æ ‡è®°ä¸ºå·²è¯»çŠ¶æ€
      tags:
        - Messages
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: messageId
          in: path
          required: true
          description: é‚®ä»¶ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      responses:
        '204':
          description: é‚®ä»¶æ ‡è®°æˆåŠŸ
        '404':
          $ref: '#/components/responses/NotFound'

  # åˆ«åç®¡ç†API
  /v1/mailboxes/{id}/aliases:
    post:
      summary: åˆ›å»ºé‚®ç®±åˆ«å
      description: ä¸ºé‚®ç®±åˆ›å»ºæ–°çš„åˆ«ååœ°å€
      tags:
        - Aliases
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAliasRequest'
      responses:
        '200':
          description: åˆ«ååˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alias'
        '400':
          $ref: '#/components/responses/BadRequest'

    get:
      summary: è·å–åˆ«ååˆ—è¡¨
      description: è·å–é‚®ç®±çš„æ‰€æœ‰åˆ«å
      tags:
        - Aliases
      parameters:
        - name: id
          in: path
          required: true
          description: é‚®ç®±ID
          schema:
            type: string
        - name: X-Mailbox-Token
          in: header
          required: true
          description: é‚®ç®±è®¿é—®ä»¤ç‰Œ
          schema:
            type: string
      responses:
        '200':
          description: åˆ«ååˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  msg:
                    type: string
                    example: è·å–æˆåŠŸ
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/Alias'
                      count:
                        type: integer
                        example: 2

  # ç®¡ç†å‘˜API
  /v1/admin/statistics:
    get:
      summary: è·å–ç³»ç»Ÿç»Ÿè®¡
      description: è·å–ç³»ç»Ÿæ•´ä½“ç»Ÿè®¡ä¿¡æ¯
      tags:
        - Admin
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç»Ÿè®¡ä¿¡æ¯è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemStatistics'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /v1/admin/users:
    get:
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      description: è·å–ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
      tags:
        - Admin
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç”¨æˆ·åˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  msg:
                    type: string
                    example: è·å–æˆåŠŸ
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          $ref: '#/components/schemas/AdminUser'
                      count:
                        type: integer
                        example: 100

  # WebSocket
  /v1/ws:
    get:
      summary: WebSocketè¿æ¥
      description: å»ºç«‹WebSocketè¿æ¥æ¥æ”¶å®æ—¶é‚®ä»¶é€šçŸ¥
      tags:
        - WebSocket
      responses:
        '101':
          description: WebSocketè¿æ¥å»ºç«‹æˆåŠŸ

  # å…¼å®¹æ€§API
  /api/emails/generate:
    post:
      summary: ç”Ÿæˆä¸´æ—¶é‚®ç®±ï¼ˆå…¼å®¹APIï¼‰
      description: ç”Ÿæˆæ–°çš„ä¸´æ—¶é‚®ç®±ï¼ˆå…¼å®¹mail.ry.edu.kgæ ¼å¼ï¼‰
      tags:
        - Compatibility
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: é‚®ç®±ç”ŸæˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  emailId:
                    type: string
                    example: "uuid-1234"
                  email:
                    type: string
                    example: "test@temp.mail"
                  token:
                    type: string
                    example: "AbCdEf123456"

  /api/emails:
    get:
      summary: è·å–é‚®ç®±åˆ—è¡¨ï¼ˆå…¼å®¹APIï¼‰
      description: è·å–ç”¨æˆ·çš„é‚®ç®±åˆ—è¡¨ï¼ˆå…¼å®¹æ ¼å¼ï¼‰
      tags:
        - Compatibility
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: é‚®ç®±åˆ—è¡¨è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    emailId:
                      type: string
                    email:
                      type: string
                    token:
                      type: string

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWTè®¤è¯ä»¤ç‰Œ
    
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: APIå¯†é’¥è®¤è¯ï¼ˆå…¼å®¹APIä½¿ç”¨ï¼‰

  schemas:
    # é€šç”¨å“åº”æ ¼å¼
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          description: ä¸šåŠ¡çŠ¶æ€ç 
          example: 200
        msg:
          type: string
          description: å“åº”æ¶ˆæ¯
          example: æ“ä½œæˆåŠŸ
        data:
          type: object
          description: å“åº”æ•°æ®
          nullable: true

    # è¯·æ±‚æ¨¡å‹
    RegisterRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: ç”¨æˆ·é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          minLength: 8
          maxLength: 72
          description: ç”¨æˆ·å¯†ç 
          example: "SecurePassword123!"
        username:
          type: string
          description: ç”¨æˆ·å
          example: "john_doe"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: ç”¨æˆ·é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          description: ç”¨æˆ·å¯†ç 
          example: "SecurePassword123!"

    RefreshRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: åˆ·æ–°ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    CreateMailboxRequest:
      type: object
      properties:
        prefix:
          type: string
          description: è‡ªå®šä¹‰é‚®ç®±å‰ç¼€ï¼ˆå¯é€‰ï¼‰
          example: "mytemp"
        domain:
          type: string
          description: é‚®ç®±åŸŸåï¼ˆå¯é€‰ï¼‰
          example: "temp.mail"
        expiresIn:
          type: string
          description: è¿‡æœŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰
          example: "24h"

    CreateAliasRequest:
      type: object
      required:
        - address
      properties:
        address:
          type: string
          description: åˆ«ååœ°å€
          example: "alias@temp.mail"

    # å“åº”æ¨¡å‹
    AuthResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                tokens:
                  $ref: '#/components/schemas/TokenPair'

    TokenResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/TokenPair'

    TokenPair:
      type: object
      properties:
        accessToken:
          type: string
          description: JWTè®¿é—®ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refreshToken:
          type: string
          description: JWTåˆ·æ–°ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        expiresIn:
          type: integer
          description: è®¿é—®ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
          example: 900

    User:
      type: object
      properties:
        id:
          type: string
          description: ç”¨æˆ·ID
          example: "550e8400-e29b-41d4-a716-446655440000"
        email:
          type: string
          description: ç”¨æˆ·é‚®ç®±
          example: "user@example.com"
        username:
          type: string
          description: ç”¨æˆ·å
          example: "john_doe"
        tier:
          type: string
          description: ç”¨æˆ·ç­‰çº§
          example: "free"
        role:
          type: string
          description: ç”¨æˆ·è§’è‰²
          example: "user"
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        isEmailVerified:
          type: boolean
          description: é‚®ç®±æ˜¯å¦éªŒè¯
          example: false
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
          example: "2025-01-01T00:00:00Z"

    UserInfo:
      allOf:
        - $ref: '#/components/schemas/User'
        - type: object
          properties:
            quota:
              type: object
              properties:
                maxMailboxes:
                  type: integer
                  description: æœ€å¤§é‚®ç®±æ•°é‡
                  example: 10
                usedMailboxes:
                  type: integer
                  description: å·²ä½¿ç”¨é‚®ç®±æ•°é‡
                  example: 3

    Mailbox:
      type: object
      properties:
        id:
          type: string
          description: é‚®ç®±ID
          example: "a1b2c3d4-e5f6-4789-a012-3456789abcde"
        address:
          type: string
          description: é‚®ç®±åœ°å€
          example: "test@temp.mail"
        localPart:
          type: string
          description: æœ¬åœ°éƒ¨åˆ†
          example: "test"
        domain:
          type: string
          description: åŸŸå
          example: "temp.mail"
        token:
          type: string
          description: è®¿é—®ä»¤ç‰Œ
          example: "AbCdEf123456"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
          example: "2025-01-01T00:00:00Z"
        expiresAt:
          type: string
          format: date-time
          description: è¿‡æœŸæ—¶é—´
          example: "2025-01-02T00:00:00Z"
        unread:
          type: integer
          description: æœªè¯»é‚®ä»¶æ•°
          example: 5
        total:
          type: integer
          description: æ€»é‚®ä»¶æ•°
          example: 12

    MailboxResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Mailbox'

    Message:
      type: object
      properties:
        id:
          type: string
          description: é‚®ä»¶ID
          example: "msg-123456"
        mailboxId:
          type: string
          description: é‚®ç®±ID
          example: "a1b2c3d4-e5f6-4789-a012-3456789abcde"
        from:
          type: string
          description: å‘ä»¶äººåœ°å€
          example: "sender@example.com"
        to:
          type: string
          description: æ”¶ä»¶äººåœ°å€
          example: "test@temp.mail"
        subject:
          type: string
          description: é‚®ä»¶ä¸»é¢˜
          example: "Test Email"
        isRead:
          type: boolean
          description: æ˜¯å¦å·²è¯»
          example: false
        receivedAt:
          type: string
          format: date-time
          description: æ¥æ”¶æ—¶é—´
          example: "2025-01-01T10:30:00Z"
        hasAttachments:
          type: boolean
          description: æ˜¯å¦æœ‰é™„ä»¶
          example: false

    MessageDetail:
      allOf:
        - $ref: '#/components/schemas/Message'
        - type: object
          properties:
        text:
          type: string
          description: çº¯æ–‡æœ¬å†…å®¹
          example: "This is a test email."
        html:
          type: string
          description: HTMLå†…å®¹
          example: "<p>This is a test email.</p>"
        attachments:
          type: array
          description: é™„ä»¶åˆ—è¡¨
          items:
            $ref: '#/components/schemas/Attachment'

    Attachment:
      type: object
      properties:
        id:
          type: string
          description: é™„ä»¶ID
          example: "att-001"
        filename:
          type: string
          description: æ–‡ä»¶å
          example: "document.pdf"
        contentType:
          type: string
          description: æ–‡ä»¶ç±»å‹
          example: "application/pdf"
        size:
          type: integer
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
          example: 102400

    Alias:
      type: object
      properties:
        id:
          type: string
          description: åˆ«åID
          example: "alias-123456"
        mailboxId:
          type: string
          description: é‚®ç®±ID
          example: "a1b2c3d4-e5f6-4789-a012-3456789abcde"
        address:
          type: string
          description: åˆ«ååœ°å€
          example: "myalias@temp.mail"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
          example: "2025-01-01T12:00:00Z"
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true

    AdminUser:
      type: object
      properties:
        id:
          type: string
          description: ç”¨æˆ·ID
          example: "user-123"
        email:
          type: string
          description: ç”¨æˆ·é‚®ç®±
          example: "user@example.com"
        username:
          type: string
          description: ç”¨æˆ·å
          example: "john_doe"
        role:
          type: string
          description: ç”¨æˆ·è§’è‰²
          example: "user"
        tier:
          type: string
          description: ç”¨æˆ·ç­‰çº§
          example: "free"
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
          example: "2025-01-01T00:00:00Z"
        mailboxCount:
          type: integer
          description: é‚®ç®±æ•°é‡
          example: 3

    SystemStatistics:
      type: object
      properties:
        totalUsers:
          type: integer
          description: æ€»ç”¨æˆ·æ•°
          example: 1250
        activeUsers:
          type: integer
          description: æ´»è·ƒç”¨æˆ·æ•°
          example: 980
        totalMailboxes:
          type: integer
          description: æ€»é‚®ç®±æ•°
          example: 5600
        totalMessages:
          type: integer
          description: æ€»é‚®ä»¶æ•°
          example: 45000
        systemUptime:
          type: string
          description: ç³»ç»Ÿè¿è¡Œæ—¶é—´
          example: "15d 8h 30m"
        memoryUsage:
          type: object
          properties:
            used:
              type: integer
              format: int64
              description: å·²ä½¿ç”¨å†…å­˜ï¼ˆå­—èŠ‚ï¼‰
              example: 512000000
            total:
              type: integer
              format: int64
              description: æ€»å†…å­˜ï¼ˆå­—èŠ‚ï¼‰
              example: 8589934592

  # é”™è¯¯å“åº”
  responses:
    BadRequest:
      description: è¯·æ±‚å‚æ•°é”™è¯¯
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 400
              msg:
                type: string
                example: è¯·æ±‚å‚æ•°é”™è¯¯
              data:
                type: object
                nullable: true
                example: null

    Unauthorized:
      description: æœªè®¤è¯æˆ–è®¤è¯å¤±è´¥
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 401
              msg:
                type: string
                example: æœªè®¤è¯
              data:
                type: object
                nullable: true
                example: null

    Forbidden:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 403
              msg:
                type: string
                example: æƒé™ä¸è¶³
              data:
                type: object
                nullable: true
                example: null

    NotFound:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 404
              msg:
                type: string
                example: èµ„æºä¸å­˜åœ¨
              data:
                type: object
                nullable: true
                example: null

    Conflict:
      description: èµ„æºå†²çª
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 409
              msg:
                type: string
                example: èµ„æºå·²å­˜åœ¨
              data:
                type: object
                nullable: true
                example: null

    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: integer
                example: 500
              msg:
                type: string
                example: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
              data:
                type: object
                nullable: true
                example: null

tags:
  - name: Health
    description: å¥åº·æ£€æŸ¥å’Œç³»ç»ŸçŠ¶æ€
  - name: Public
    description: å…¬å¼€çš„APIï¼ˆæ— éœ€è®¤è¯ï¼‰
  - name: Authentication
    description: ç”¨æˆ·è®¤è¯ç›¸å…³API
  - name: Mailbox
    description: é‚®ç®±ç®¡ç†API
  - name: Messages
    description: é‚®ä»¶ç®¡ç†API
  - name: Aliases
    description: åˆ«åç®¡ç†API
  - name: Admin
    description: ç®¡ç†å‘˜API
  - name: WebSocket
    description: WebSocketå®æ—¶é€šçŸ¥
  - name: Compatibility
    description: å…¼å®¹æ€§API
